<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>【WEB】利用thinkphp创建一个物流原型系统 | ？0的网络笔记</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'd80a6841688947ba89dd953fc3baed70';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">【WEB】利用thinkphp创建一个物流原型系统</h1><a id="logo" href="/.">？0的网络笔记</a><p class="description">whl1207.github.io</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">【WEB】利用thinkphp创建一个物流原型系统</h1><div class="post-meta">2020-05-05<span> | </span><span class="category"><a href="/categories/WEB/">WEB</a></span></div><a class="disqus-comment-count" href="/2020/05/05/%E3%80%90WEB%E3%80%91%E5%88%A9%E7%94%A8thinkphp%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%89%A9%E6%B5%81%E5%8E%9F%E5%9E%8B%E7%B3%BB%E7%BB%9F/#vcomment"><span class="valine-comment-count" data-xid="/2020/05/05/%E3%80%90WEB%E3%80%91%E5%88%A9%E7%94%A8thinkphp%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%89%A9%E6%B5%81%E5%8E%9F%E5%9E%8B%E7%B3%BB%E7%BB%9F/"></span><span> 条评论</span></a><div class="post-content"><p>本文将完成一个物流原型系统核心代码的编写。</p>
<h2 id="一、系统需求"><a href="#一、系统需求" class="headerlink" title="一、系统需求"></a>一、系统需求</h2><p>系统需完成的功能包括：</p>
<ul>
<li>订单提交</li>
<li>订单追踪（出发地、目的地、当前位置）</li>
<li>地图集成（百度地图api）</li>
<li>用户管理</li>
</ul>
<h2 id="二、技术基础"><a href="#二、技术基础" class="headerlink" title="二、技术基础"></a>二、技术基础</h2><ul>
<li>后端：php，框架：thinkphp</li>
<li>前端：bootstrap，jquery，百度api</li>
</ul>
<p>关于thinkphp的核心学习可参考前一篇《利用thinkphp建立一个简单的站点》，其中介绍了该框架的基础入门教程。</p>
<h2 id="三、系统设计"><a href="#三、系统设计" class="headerlink" title="三、系统设计"></a>三、系统设计</h2><h3 id="1、控制器及视图"><a href="#1、控制器及视图" class="headerlink" title="1、控制器及视图"></a>1、控制器及视图</h3><p>由于是原型系统，所以在控制器上不分其他控制器，因此只需创建一个index的控制器，然后在该控制器的方法上做文章。视图文件也可就放在一个index文件夹中，方便调用。</p>
<h3 id="2、数据库设计"><a href="#2、数据库设计" class="headerlink" title="2、数据库设计"></a>2、数据库设计</h3><p>user表：</p>
<ul>
<li>id:int 8（用户编号）</li>
<li>name:varchar 20（用户名）</li>
<li>password:varchar 20（密码）</li>
<li>type:int 1（用户类型：用户、司机、管理员等）</li>
</ul>
<p>order表：</p>
<ul>
<li>id:int 8（订单编号）</li>
<li>start:varchar 50（订单起始地，位置信息用字符串描述）</li>
<li>end:varchar 50（订单目的地，位置信息用字符串描述）</li>
<li>time:varchar 50（订单上传时间）</li>
<li>lal:varchar 50（订单目前所处位置）</li>
</ul>
<h2 id="四、核心代码"><a href="#四、核心代码" class="headerlink" title="四、核心代码"></a>四、核心代码</h2><h3 id="1、index控制器"><a href="#1、index控制器" class="headerlink" title="1、index控制器"></a>1、index控制器</h3><p>控制器index的核心代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace app\index\controller;</span><br><span class="line"></span><br><span class="line">//引入多个包</span><br><span class="line">use think\Controller;</span><br><span class="line">use think\View;</span><br><span class="line">use think\Db;</span><br><span class="line">use think\Request;</span><br><span class="line">use think\Session;</span><br><span class="line"></span><br><span class="line">class Index extends Controller</span><br><span class="line">&#123;</span><br><span class="line">    public <span class="keyword">function</span> index()//首页</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$DB</span>=new Db;</span><br><span class="line">        <span class="variable">$order</span>=<span class="variable">$DB</span>::table(<span class="string">"order"</span>)-&gt;select();</span><br><span class="line">        <span class="variable">$this</span>-&gt;assign(<span class="string">'order'</span>,<span class="variable">$order</span>);</span><br><span class="line">        <span class="variable">$this</span>-&gt;assign(<span class="string">'name'</span>,Session::get(<span class="string">'name'</span>));</span><br><span class="line">        <span class="variable">$this</span>-&gt;assign(<span class="string">'type'</span>,Session::get(<span class="string">'type'</span>)==0?<span class="string">"用户"</span>:<span class="string">"司机"</span>);</span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$this</span>-&gt;fetch();</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> query()//查询页</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(request()-&gt;isPost())&#123;</span><br><span class="line">            <span class="variable">$DB</span>=new Db;</span><br><span class="line">            <span class="variable">$map</span>[<span class="string">'id'</span>]=input(<span class="string">'id'</span>);</span><br><span class="line">            <span class="variable">$order</span>=<span class="variable">$DB</span>::table(<span class="string">"order"</span>)-&gt;<span class="built_in">where</span>(<span class="variable">$map</span>)-&gt;find();</span><br><span class="line">            <span class="variable">$this</span>-&gt;assign(<span class="string">'order'</span>,<span class="variable">$order</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$this</span>-&gt;fetch();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$this</span>-&gt;error(<span class="string">"错误"</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> view(<span class="variable">$id</span>)//订单页</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$DB</span>=new Db;</span><br><span class="line">        <span class="variable">$map</span>[<span class="string">'id'</span>]=<span class="variable">$id</span>;</span><br><span class="line">        <span class="variable">$order</span>=<span class="variable">$DB</span>::table(<span class="string">"order"</span>)-&gt;<span class="built_in">where</span>(<span class="variable">$map</span>)-&gt;find();</span><br><span class="line">        <span class="variable">$this</span>-&gt;assign(<span class="string">'order'</span>,<span class="variable">$order</span>);</span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$this</span>-&gt;fetch(<span class="string">'query'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> add()//添加订单</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(request()-&gt;isPost())&#123;</span><br><span class="line">            <span class="variable">$data</span>=[</span><br><span class="line">                <span class="string">'start'</span>=&gt;input(<span class="string">'start'</span>),</span><br><span class="line">                <span class="string">'end'</span>=&gt;input(<span class="string">'end'</span>),</span><br><span class="line">                <span class="string">'time'</span>=&gt;time(),</span><br><span class="line">            ];</span><br><span class="line">            <span class="variable">$DB</span>=new Db;</span><br><span class="line">            <span class="variable">$DB</span>::name(<span class="string">'order'</span>)-&gt;insert(<span class="variable">$data</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$this</span>-&gt;success(<span class="string">"添加成功!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> del(<span class="variable">$id</span>)//删除订单</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$DB</span>=new Db;</span><br><span class="line">        <span class="variable">$info</span>=<span class="variable">$DB</span>::table(<span class="string">"order"</span>)-&gt;<span class="built_in">where</span>(<span class="string">'id'</span>,<span class="variable">$id</span>)-&gt;delete();</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$info</span>)&#123; </span><br><span class="line">            <span class="variable">$this</span>-&gt;success(<span class="string">"删除成功!"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable">$this</span>-&gt;error(<span class="variable">$file</span>-&gt;getError());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> douser()//验证用户</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$request</span> = Request::instance();</span><br><span class="line">        <span class="keyword">if</span>(request()-&gt;isPost())&#123;</span><br><span class="line">            <span class="variable">$m</span>[<span class="string">'name'</span>]=input(<span class="string">'name'</span>);</span><br><span class="line">            <span class="variable">$m</span>[<span class="string">'password'</span>]=input(<span class="string">'password'</span>);</span><br><span class="line">            <span class="variable">$DB</span>=new Db;</span><br><span class="line">            <span class="variable">$userdata</span>=<span class="variable">$DB</span>::table(<span class="string">"user"</span>)-&gt;<span class="built_in">where</span>(<span class="variable">$m</span>)-&gt;find();</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$userdata</span>==null)&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$this</span>-&gt;error(<span class="string">'用户名或密码错误！'</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                Session::<span class="built_in">set</span>(<span class="string">'name'</span>,<span class="variable">$userdata</span>[<span class="string">'name'</span>]);</span><br><span class="line">                Session::<span class="built_in">set</span>(<span class="string">'type'</span>,<span class="variable">$userdata</span>[<span class="string">'type'</span>]);</span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$this</span>-&gt;success(<span class="string">'登录成功！'</span>,url(<span class="string">'index/index'</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> loginout()//注销</span><br><span class="line">    &#123;</span><br><span class="line">        Session::delete(<span class="string">'name'</span>);</span><br><span class="line">        Session::delete(<span class="string">'type'</span>);</span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$this</span>-&gt;success(<span class="string">'注销成功！'</span>,url(<span class="string">'index/index'</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在index控制器中，我们写了几个函数用于构建对应链接所导致的行为，如显示主页、查询页等页面，用户登录注销等操作以及添加订单等行为。</p>
<h3 id="2、index-html主页"><a href="#2、index-html主页" class="headerlink" title="2、index.html主页"></a>2、index.html主页</h3><p>主页index.html的代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;title&gt;物流信息原型系统&lt;/title&gt;</span><br><span class="line">		&lt;!-- 引入css文件 --&gt;</span><br><span class="line">		&lt;link rel=<span class="string">"stylesheet"</span> <span class="built_in">type</span>=<span class="string">"text/css"</span> href=<span class="string">"__HOME__/css/bootstrap.min.css"</span> /&gt;</span><br><span class="line">		&lt;!-- 引入js文件 --&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/jquery-3.4.1.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/bootstrap.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/echarts.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;nav class=<span class="string">"navbar navbar-dark bg-dark navbar-expand-lg mb-3"</span>&gt;</span><br><span class="line">			&lt;a class=<span class="string">"navbar-brand"</span> href=<span class="string">"&#123;:url('index/index');&#125;"</span>&gt;物流信息原型系统&lt;/a&gt;</span><br><span class="line">			&lt;button class=<span class="string">"navbar-toggler"</span> <span class="built_in">type</span>=<span class="string">"button"</span> data-toggle=<span class="string">"collapse"</span> data-target=<span class="string">"#navbarSupportedContent"</span> aria-controls=<span class="string">"navbarSupportedContent"</span> aria-expanded=<span class="string">"false"</span> aria-label=<span class="string">"Toggle navigation"</span>&gt;</span><br><span class="line">				&lt;span class=<span class="string">"navbar-toggler-icon"</span>&gt;&lt;/span&gt;</span><br><span class="line">			&lt;/button&gt;</span><br><span class="line">			&lt;div class=<span class="string">"collapse navbar-collapse"</span> id=<span class="string">"navbarSupportedContent"</span>&gt;</span><br><span class="line">				&lt;ul class=<span class="string">"navbar-nav mr-auto"</span>&gt;</span><br><span class="line">				&lt;li class=<span class="string">"nav-item dropdown"</span>&gt;</span><br><span class="line">					&lt;a class=<span class="string">"nav-link dropdown-toggle"</span> href=<span class="string">"#"</span> id=<span class="string">"navbarDropdown"</span> role=<span class="string">"button"</span> data-toggle=<span class="string">"dropdown"</span> aria-haspopup=<span class="string">"true"</span> aria-expanded=<span class="string">"false"</span>&gt;</span><br><span class="line">					管理</span><br><span class="line">					&lt;/a&gt;</span><br><span class="line">					&lt;div class=<span class="string">"dropdown-menu"</span> aria-labelledby=<span class="string">"navbarDropdown"</span>&gt;</span><br><span class="line">						&lt;a class=<span class="string">"dropdown-item"</span> href=<span class="string">"#"</span>&gt;上传单号&lt;/a&gt;</span><br><span class="line">						&lt;div class=<span class="string">"dropdown-divider"</span>&gt;&lt;/div&gt;</span><br><span class="line">						&lt;a class=<span class="string">"dropdown-item"</span> href=<span class="string">"#"</span>&gt;管理单号&lt;/a&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;form class=<span class="string">"form-inline my-2 my-lg-0"</span>&gt;</span><br><span class="line">					&lt;input class=<span class="string">"form-control mr-sm-2"</span> <span class="built_in">type</span>=<span class="string">"search"</span> placeholder=<span class="string">"单号"</span> aria-label=<span class="string">"Search"</span>&gt;</span><br><span class="line">					&lt;button class=<span class="string">"btn btn-outline-success my-2 my-sm-0"</span> <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;查询&lt;/button&gt;</span><br><span class="line">				&lt;/form&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/nav&gt;</span><br><span class="line">		&lt;div class=<span class="string">"container"</span>&gt;</span><br><span class="line">			&lt;div class=<span class="string">"row"</span>&gt;</span><br><span class="line">				&lt;div class=<span class="string">"col-md-4 col-sm-12"</span>&gt;</span><br><span class="line">					&#123;<span class="keyword">if</span> condition=<span class="string">"<span class="variable">$Think</span>.session.name == null"</span>&#125;</span><br><span class="line">						&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">							&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">								登录</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">							&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">								&lt;form method=<span class="string">"post"</span> action=<span class="string">"&#123;:url('index/douser');&#125;"</span>&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">										&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">										&lt;span class=<span class="string">"input-group-text"</span>&gt;用户名&lt;/span&gt;</span><br><span class="line">										&lt;/div&gt;</span><br><span class="line">										&lt;input name=<span class="string">"name"</span> <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">""</span>&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">										&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">										&lt;span class=<span class="string">"input-group-text"</span>&gt;密码&lt;/span&gt;</span><br><span class="line">										&lt;/div&gt;</span><br><span class="line">										&lt;input name=<span class="string">"password"</span> <span class="built_in">type</span>=<span class="string">"password"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">""</span>&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;button id=<span class="string">"count"</span> <span class="built_in">type</span>=<span class="string">"submit"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;登录&lt;/button&gt;</span><br><span class="line">								&lt;/form&gt;</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&#123;<span class="keyword">else</span> /&#125;</span><br><span class="line">						&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">							&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">								个人信息</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">							&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">									姓名：&#123;<span class="variable">$name</span>&#125;&lt;/br&gt;</span><br><span class="line">									类型：&#123;<span class="variable">$type</span>&#125;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;button <span class="built_in">type</span>=<span class="string">"submit"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;进入个人中心&lt;/button&gt;</span><br><span class="line">								&lt;a href=<span class="string">"&#123;:url('index/loginout');&#125;"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;退出&lt;/a&gt;</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&#123;/<span class="keyword">if</span>&#125;</span><br><span class="line">					&lt;br/&gt;</span><br><span class="line">					&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">							查询订单</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">							&lt;form method=<span class="string">"post"</span> action=<span class="string">"&#123;:url('index/query');&#125;"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;单号&lt;/span&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;input name=<span class="string">"id"</span> <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">""</span>&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;button id=<span class="string">"count"</span> <span class="built_in">type</span>=<span class="string">"submit"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;查询&lt;/button&gt;</span><br><span class="line">							&lt;/form&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">					&lt;br/&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div class=<span class="string">"col-md-8 col-sm-12"</span>&gt;</span><br><span class="line">					&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">							最新订单</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">							&lt;table class=<span class="string">"table"</span>&gt;</span><br><span class="line">								&lt;thead&gt;</span><br><span class="line">								  &lt;tr&gt;</span><br><span class="line">									&lt;th scope=<span class="string">"col"</span>&gt;单号&lt;/th&gt;</span><br><span class="line">									&lt;th scope=<span class="string">"col"</span>&gt;出发地&lt;/th&gt;</span><br><span class="line">									&lt;th scope=<span class="string">"col"</span>&gt;目的地&lt;/th&gt;</span><br><span class="line">									&lt;th scope=<span class="string">"col"</span>&gt;操作&lt;/th&gt;</span><br><span class="line">								  &lt;/tr&gt;</span><br><span class="line">								&lt;/thead&gt;</span><br><span class="line">								&lt;tbody&gt;</span><br><span class="line">									&#123;foreach <span class="variable">$order</span> as <span class="variable">$data</span>&#125; </span><br><span class="line">										&lt;tr&gt;</span><br><span class="line">											&lt;th scope=<span class="string">"row"</span>&gt;&#123;<span class="variable">$data</span>.id&#125;&lt;/th&gt;</span><br><span class="line">											&lt;td&gt;&#123;<span class="variable">$data</span>.start&#125;&lt;/td&gt;</span><br><span class="line">											&lt;td&gt;&#123;<span class="variable">$data</span>.end&#125;&lt;/td&gt;</span><br><span class="line">											&lt;td&gt;&lt;a href=<span class="string">"&#123;:url('index/view');&#125;/id/&#123;<span class="variable">$data</span>.id&#125;"</span>&gt;查看&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">										&lt;/tr&gt;</span><br><span class="line">									&#123;/foreach&#125;</span><br><span class="line">								&lt;/tbody&gt;</span><br><span class="line">							  &lt;/table&gt;</span><br><span class="line">							</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>主页中用到了thinkph视图的输出函数，在无用户登录时显示登录框，在登录后显示用户个人信息框。同时在该页面集成查询、最新订单的显示等页面。</p>
<h3 id="3、query-html查询页"><a href="#3、query-html查询页" class="headerlink" title="3、query.html查询页"></a>3、query.html查询页</h3><p>查询也query.html的代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;title&gt;物流信息原型系统&lt;/title&gt;</span><br><span class="line">		&lt;!-- 引入css文件 --&gt;</span><br><span class="line">		&lt;link rel=<span class="string">"stylesheet"</span> <span class="built_in">type</span>=<span class="string">"text/css"</span> href=<span class="string">"__HOME__/css/bootstrap.min.css"</span> /&gt;</span><br><span class="line">		&lt;!-- 引入js文件 --&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/jquery-3.4.1.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/bootstrap.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">		&lt;script src=<span class="string">"__HOME__/js/echarts.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">		&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"http://api.map.baidu.com/api?v=3.0&amp;ak=RODusGpnlcywQkMpTigghmhb5mfPu2Gf"</span>&gt;&lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;nav class=<span class="string">"navbar navbar-dark bg-dark navbar-expand-lg mb-3"</span>&gt;</span><br><span class="line">			&lt;a class=<span class="string">"navbar-brand"</span> href=<span class="string">"&#123;:url('index/index');&#125;"</span>&gt;物流信息原型系统&lt;/a&gt;</span><br><span class="line">			&lt;button class=<span class="string">"navbar-toggler"</span> <span class="built_in">type</span>=<span class="string">"button"</span> data-toggle=<span class="string">"collapse"</span> data-target=<span class="string">"#navbarSupportedContent"</span> aria-controls=<span class="string">"navbarSupportedContent"</span> aria-expanded=<span class="string">"false"</span> aria-label=<span class="string">"Toggle navigation"</span>&gt;</span><br><span class="line">				&lt;span class=<span class="string">"navbar-toggler-icon"</span>&gt;&lt;/span&gt;</span><br><span class="line">			&lt;/button&gt;</span><br><span class="line">			&lt;div class=<span class="string">"collapse navbar-collapse"</span> id=<span class="string">"navbarSupportedContent"</span>&gt;</span><br><span class="line">				&lt;ul class=<span class="string">"navbar-nav mr-auto"</span>&gt;</span><br><span class="line">				&lt;li class=<span class="string">"nav-item dropdown"</span>&gt;</span><br><span class="line">					&lt;a class=<span class="string">"nav-link dropdown-toggle"</span> href=<span class="string">"#"</span> id=<span class="string">"navbarDropdown"</span> role=<span class="string">"button"</span> data-toggle=<span class="string">"dropdown"</span> aria-haspopup=<span class="string">"true"</span> aria-expanded=<span class="string">"false"</span>&gt;</span><br><span class="line">					管理</span><br><span class="line">					&lt;/a&gt;</span><br><span class="line">					&lt;div class=<span class="string">"dropdown-menu"</span> aria-labelledby=<span class="string">"navbarDropdown"</span>&gt;</span><br><span class="line">						&lt;a class=<span class="string">"dropdown-item"</span> href=<span class="string">"#"</span>&gt;上传单号&lt;/a&gt;</span><br><span class="line">						&lt;div class=<span class="string">"dropdown-divider"</span>&gt;&lt;/div&gt;</span><br><span class="line">						&lt;a class=<span class="string">"dropdown-item"</span> href=<span class="string">"#"</span>&gt;管理单号&lt;/a&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/li&gt;</span><br><span class="line">				&lt;/ul&gt;</span><br><span class="line">				&lt;form class=<span class="string">"form-inline my-2 my-lg-0"</span>&gt;</span><br><span class="line">					&lt;input class=<span class="string">"form-control mr-sm-2"</span> <span class="built_in">type</span>=<span class="string">"search"</span> placeholder=<span class="string">"单号"</span> aria-label=<span class="string">"Search"</span>&gt;</span><br><span class="line">					&lt;button class=<span class="string">"btn btn-outline-success my-2 my-sm-0"</span> <span class="built_in">type</span>=<span class="string">"submit"</span>&gt;查询&lt;/button&gt;</span><br><span class="line">				&lt;/form&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/nav&gt;</span><br><span class="line">		&lt;div class=<span class="string">"container"</span>&gt;</span><br><span class="line">			&lt;div class=<span class="string">"row"</span>&gt;</span><br><span class="line">				&lt;div class=<span class="string">"col-md-4 col-sm-12"</span>&gt;</span><br><span class="line">					&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">							查询订单</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">							&lt;form method=<span class="string">"post"</span> action=<span class="string">"&#123;:url('index/query');&#125;"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;单号&lt;/span&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;input name=<span class="string">"id"</span> <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">"&#123;<span class="variable">$order</span>.id&#125;"</span>&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;button id=<span class="string">"count"</span> <span class="built_in">type</span>=<span class="string">"submit"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;查询&lt;/button&gt;</span><br><span class="line">							&lt;/form&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">					&lt;br/&gt;</span><br><span class="line">					&lt;div class=<span class="string">"card"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">							管理订单</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">							&lt;form method=<span class="string">"post"</span> action=<span class="string">"&#123;:url('index/query');&#125;"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;当前位置&lt;/span&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;input id=<span class="string">"lal"</span> name=<span class="string">"lal"</span> <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">""</span>&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">									&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;信息&lt;/span&gt;</span><br><span class="line">									&lt;/div&gt;</span><br><span class="line">									&lt;input name=<span class="string">"inf"</span> <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">""</span>&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;button id=<span class="string">"count"</span> <span class="built_in">type</span>=<span class="string">"submit"</span> class=<span class="string">"btn btn-primary btn-block mb-3"</span> data-dismiss=<span class="string">"modal"</span>&gt;更新&lt;/button&gt;</span><br><span class="line">							&lt;/form&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">					&lt;br/&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">				&lt;div class=<span class="string">"col-md-8 col-sm-12"</span>&gt;</span><br><span class="line">					&lt;div class=<span class="string">"card mb-3"</span> style=<span class="string">"width: 100%;"</span>&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-header"</span>&gt;</span><br><span class="line">							订单信息</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;div class=<span class="string">"card-body"</span>&gt;</span><br><span class="line">							&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;单号&lt;/span&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">"&#123;<span class="variable">$order</span>.id&#125;"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;出发地&lt;/span&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">"&#123;<span class="variable">$order</span>.start&#125;"</span>&gt;</span><br><span class="line">								&lt;div class=<span class="string">"input-group-prepend"</span>&gt;</span><br><span class="line">									&lt;span class=<span class="string">"input-group-text"</span> id=<span class="string">"basic-addon1"</span>&gt;目的地&lt;/span&gt;</span><br><span class="line">								&lt;/div&gt;</span><br><span class="line">								&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> class=<span class="string">"form-control"</span> placeholder=<span class="string">""</span> aria-describedby=<span class="string">"basic-addon1"</span> value=<span class="string">"&#123;<span class="variable">$order</span>.end&#125;"</span>&gt;</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">							&lt;div class=<span class="string">"input-group mb-3"</span>&gt;</span><br><span class="line">								</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">							&lt;div id=<span class="string">"container"</span> style=<span class="string">"width:100%;height:500px"</span>&gt;&lt;/div&gt; </span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">						&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">							var map = new BMap.Map(<span class="string">"container"</span>);          // 创建地图实例 </span><br><span class="line">							var curpoint = new BMap.Point(&#123;<span class="variable">$order</span>.lal&#125;);  // 创建点坐标 </span><br><span class="line">							map.centerAndZoom(curpoint, 8);   // 初始化地图，设置中心点坐标和地图级别</span><br><span class="line">							map.enableScrollWheelZoom(<span class="literal">true</span>);     //开启鼠标滚轮缩放</span><br><span class="line"></span><br><span class="line">							var myIcon = new BMap.Icon(<span class="string">"__HOME__/img/1.png"</span>, new BMap.Size(50,32));</span><br><span class="line">							var marker = new BMap.Marker(curpoint,&#123;icon:myIcon&#125;);        // 创建标注   </span><br><span class="line">							map.addOverlay(marker);                     // 将标注添加到地图中</span><br><span class="line"></span><br><span class="line">							// 创建地址解析器实例</span><br><span class="line">							var myGeo = new BMap.Geocoder();</span><br><span class="line"></span><br><span class="line">							// 将地址解析结果显示在地图上,并调整地图视野</span><br><span class="line">							myGeo.getPoint(<span class="string">"&#123;<span class="variable">$order</span>.start&#125;"</span>, <span class="keyword">function</span>(spoint)&#123;</span><br><span class="line">								<span class="keyword">if</span> (spoint) &#123;</span><br><span class="line">									map.addOverlay(new BMap.Marker(spoint));</span><br><span class="line">									myGeo.getPoint(<span class="string">"&#123;<span class="variable">$order</span>.end&#125;"</span>, <span class="keyword">function</span>(epoint)&#123;</span><br><span class="line">										<span class="keyword">if</span> (epoint) &#123;</span><br><span class="line">											map.addOverlay(new BMap.Marker(epoint));</span><br><span class="line">											var driving = new BMap.DrivingRoute(map, &#123;</span><br><span class="line">												renderOptions: &#123;</span><br><span class="line">													map: map,</span><br><span class="line">													autoViewport: <span class="literal">true</span> </span><br><span class="line">												&#125;</span><br><span class="line">											&#125;);</span><br><span class="line"></span><br><span class="line">											driving.search(curpoint, epoint);</span><br><span class="line">											//调整视野</span><br><span class="line">											map.setViewport([spoint, curpoint, epoint]); </span><br><span class="line">										&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">											alert(<span class="string">"您选择地址没有解析到结果!"</span>);</span><br><span class="line">										&#125;</span><br><span class="line">									&#125;);</span><br><span class="line">								&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">									alert(<span class="string">"您选择地址没有解析到结果!"</span>);</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;);</span><br><span class="line">							</span><br><span class="line">							//获取位置</span><br><span class="line">							<span class="keyword">function</span> <span class="function"><span class="title">getPosition</span></span>() &#123;</span><br><span class="line">								<span class="keyword">if</span>(navigator.geolocation)&#123;</span><br><span class="line">									//navigator.geolocation.getCurrentPosition这个方法里面有三个参数</span><br><span class="line">									//这个会在界面拉出一个消息框，让用户确认是否允许获取位置,不过pc端我试了都是err，</span><br><span class="line">									//参1，成功后执行的函数</span><br><span class="line">									//参2，失败时执行的函数</span><br><span class="line">									//参3，选项配置，下面是在6000毫秒内结束请求</span><br><span class="line">									navigator.geolocation.getCurrentPosition(</span><br><span class="line">										<span class="keyword">function</span> (position) &#123;</span><br><span class="line">											var latitude = position.coords.latitude;</span><br><span class="line">											var longitude = position.coords.longitude;</span><br><span class="line">											$(<span class="string">'#lal'</span>).val(latitude+latitude);</span><br><span class="line">										&#125;,</span><br><span class="line">										/*<span class="keyword">function</span> (error) &#123;</span><br><span class="line">											//处理错误</span><br><span class="line">											switch (error.code) &#123;</span><br><span class="line">												<span class="keyword">case</span> 1:</span><br><span class="line">													alert(<span class="string">"位置服务被拒绝。"</span>);</span><br><span class="line">													<span class="built_in">break</span>;</span><br><span class="line">												<span class="keyword">case</span> 2:</span><br><span class="line">													alert(<span class="string">"暂时获取不到位置信息。"</span>);</span><br><span class="line">													<span class="built_in">break</span>;</span><br><span class="line">												<span class="keyword">case</span> 3:</span><br><span class="line">													alert(<span class="string">"获取信息超时。"</span>);</span><br><span class="line">													<span class="built_in">break</span>;</span><br><span class="line">												default:</span><br><span class="line">													alert(<span class="string">"未知错误。"</span>);</span><br><span class="line">													<span class="built_in">break</span>;</span><br><span class="line">											&#125;</span><br><span class="line">										&#125;*/</span><br><span class="line">									)</span><br><span class="line">								&#125;</span><br><span class="line">							&#125;</span><br><span class="line">							getPosition();</span><br><span class="line">						&lt;/script&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在该页面中最核心的代码是调用百度地图的api，该调用需要先申请ak密匙然后填入其中才可正确调用。</p>
<p>通过这样几步就能完成一个物流系统核心代码的编写。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://whl1207.github.io/2020/05/05/%E3%80%90WEB%E3%80%91%E5%88%A9%E7%94%A8thinkphp%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%89%A9%E6%B5%81%E5%8E%9F%E5%9E%8B%E7%B3%BB%E7%BB%9F/" data-id="ckclu43w300063go16gdqdx80" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT4AAAE+CAAAAAAxUyPsAAAFRUlEQVR42u3bQW7cSBAEQP3/07tXA6uhMisp+LChkzGgmsVoAVOdRX99xT///PHz5yftlc8r5Gs+1/m8/n+vydc//uDDhw8fPnwfFv203PNtkuufr0kQk8oTyrfqx4cPHz58+Ba+pAloi3heMyk0J2hbmfbpPn6ODx8+fPjw/TJf+xjvQuTtRdIStVXhw4cPHz58f4svP/zfHmxJyPOHb/8s8OHDhw8fvrf48uN6G5rfSn9rAJCPGX591oEPHz58+PCVjcL/598v/+DDhw8fPnzxwft2IM+P33vjko/A80oiAXz48OHDh+8kkAQE+Ti8/Za/NU/tJ22QUQQH+PDhw4cPX8yXkLUtwvLq2LLaHvG3Dvjw4cOHD9/OlzcoyYj61hw83zGv/DYyL67Ehw8fPnz4LldG/zG4jQyWiDzZtrzhaFuxemV8+PDhw4cvXrn9tVsQfxux7+u0oX8bheDDhw8fPnw3vuQLvn2MdpTeBvrtOklzloN+5VkFPnz48OHDF7QpydG9PWwvcUAbUiRblVeCDx8+fPjwvcXXjpmL43QZNCTBQb6p9ai7jDC+mXXgw4cPHz58QSXtC2E3oHaIvozDk8dur4neL8CHDx8+fPhivvYhc9x8e3KaPcpfhuX48OHDhw/fwncrMR9778Xln7Sbukck+PDhw4cPX8uXNBxvjc/b1mHZ1Oc1lzYLHz58+PDhW/jyw/ytlCVkv43kl+g//0PBhw8fPnz4bnz5i1/LwycNSvuQy/C7ve8PMT0+fPjw4cN34rsdy2/H7GUkkB/1333x7psr8eHDhw8fvpKvbRHqr/bH7/cbdBv35/RRHP9pWI4PHz58+PDNfPkSycPv84T88ab39dr74sOHDx8+fKf7tq+LvTt0z++bNy75J22Q8TG4x4cPHz58+Ib+JP+Fd4/lyX3bJqm91y3Qx4cPHz58+JIJbzvqvo3A25H8uwP7X3lefPjw4cOH71W+Wy69DK3fDd9voUMRfODDhw8fPnzzfDlvONomZh9g5y+rLRuZtFb48OHDhw/fja89rr/Vvtwi/pamDQjaBg4fPnz48OFr+W4D77aByK+/bfktrG8bl6hmfPjw4cOHL645uSh/+HadvG1qW413QxB8+PDhw4dv4bs1Ikmh7eE/f4zlLnk7lVSIDx8+fPjwtXxvvaSVNyK3cOE31lm2/5u/QXz48OHDhy/my0fIz1/tySd5DLGALg3T7XN8+PDhw4dv4btF3jlWG+5PU4iSsq0KHz58+PDha/mW1qGOtk/b1t5lGYG3IQI+fPjw4cOX8+UH4/ZYvrQOyUbmVbXoyQCgzhXw4cOHDx++srjbgPwZpY0nki15ASWo4ZvGBR8+fPjw4Sv5lkP1lFgMh/+lYWo3LOr78OHDhw8fvp8r/GoD+vYAf4PIKdvfzZuYouXChw8fPnz4Tnz5MT45ut/C9Lb5SDb1rXE+Pnz48OHDt/DlpeRf53njchu6Lw98q/OHxAUfPnz48OEr+XKg5YW2dli+hO9JW9YOJL4RwIcPHz58+Ga+pHFZRuy3cpMVknpufyIfnwgfPnz48OG7zK+LdiH/+s9Lbwfnt2i+/d23Agt8+PDhw4cvyZzbYXNLebs+r3aP45MtxIcPHz58+Ba+/LWzZbS8h/V5zW1U8fKbffjw4cOHD9/Ml4TjSblJbrFsaj42uDUrx8YFHz58+PDhOxX6fDi/DZtvQUAeFhQct7AeHz58+PDh+4U5b/7y2TIUX14pyxumZXCODx8+fPjwLXxtVN2G8vlBfW9NlhjiRokPHz58+PDFfP8CVu0cw5K1XZEAAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/WEB/"><i class="fa fa-tag"></i>WEB</a><a href="/tags/thinkphp/"><i class="fa fa-tag"></i>thinkphp</a><a href="/tags/%E5%85%A8%E6%A0%88/"><i class="fa fa-tag"></i>全栈</a></div><div class="post-nav"><a class="next" href="/2020/04/28/%E3%80%90WEB+%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E4%BD%93%E3%80%91%E5%9F%BA%E4%BA%8Etensorflow.js%E7%9A%84%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/">【WEB+人工智能】基于tensorflow.js的人工智能开发入门</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' ? true : false;
var verify = 'false' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'meEC0lb9VEAQeLt5yOttQnBl-gzGzoHsz',
  appKey:'vuiHwI73GTkGJd6piGCGV48v',
  placeholder:'说点啥呢？',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://whl1207.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%BF%E7%9C%9F/">仿真</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9F%BA%E7%A1%80/">基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E6%9C%AF/">学术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A1%AC%E4%BB%B6/">硬件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B5%84%E6%BA%90/">资源</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/WEB/" style="font-size: 15px;">WEB</a> <a href="/tags/tensorflow-js/" style="font-size: 15px;">tensorflow.js</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">人工智能</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/node-js/" style="font-size: 15px;">node.js</a> <a href="/tags/%E5%9B%BE%E5%BD%A2%E8%AE%A1%E7%AE%97/" style="font-size: 15px;">图形计算</a> <a href="/tags/thinkphp/" style="font-size: 15px;">thinkphp</a> <a href="/tags/%E5%85%A8%E6%A0%88/" style="font-size: 15px;">全栈</a> <a href="/tags/%E4%BB%BF%E7%9C%9F/" style="font-size: 15px;">仿真</a> <a href="/tags/Anylogic/" style="font-size: 15px;">Anylogic</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 15px;">服务器</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">教程</a> <a href="/tags/%E7%A6%BB%E6%95%A3%E4%BA%8B%E4%BB%B6/" style="font-size: 15px;">离散事件</a> <a href="/tags/%E5%8A%A0%E5%B7%A5%E8%BD%A6%E9%97%B4/" style="font-size: 15px;">加工车间</a> <a href="/tags/%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">生命游戏</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 15px;">基础</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">操作系统</a> <a href="/tags/%E9%97%AE%E9%A2%98/" style="font-size: 15px;">问题</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">学习</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 15px;">资源</a> <a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 15px;">搜索</a> <a href="/tags/%E5%AD%A6%E6%9C%AF/" style="font-size: 15px;">学术</a> <a href="/tags/%E8%A3%85%E5%A4%87/" style="font-size: 15px;">装备</a> <a href="/tags/%E4%BF%9D%E9%9A%9C/" style="font-size: 15px;">保障</a> <a href="/tags/%E7%A1%AC%E4%BB%B6/" style="font-size: 15px;">硬件</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 15px;">树莓派</a> <a href="/tags/conky/" style="font-size: 15px;">conky</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/05/05/%E3%80%90WEB%E3%80%91%E5%88%A9%E7%94%A8thinkphp%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%89%A9%E6%B5%81%E5%8E%9F%E5%9E%8B%E7%B3%BB%E7%BB%9F/">【WEB】利用thinkphp创建一个物流原型系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/28/%E3%80%90WEB+%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E4%BD%93%E3%80%91%E5%9F%BA%E4%BA%8Etensorflow.js%E7%9A%84%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/">【WEB+人工智能】基于tensorflow.js的人工智能开发入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/24/%E3%80%90%E4%BB%BF%E7%9C%9F%E3%80%91%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F/">【仿真】生命游戏</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/23/%E3%80%90%E4%BB%BF%E7%9C%9F%E3%80%91%E5%9F%BA%E4%BA%8EAnylogic%E7%9A%84Java%E4%BB%A3%E7%A0%81%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/">【仿真】基于Anylogic的Java代码入门教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/21/%E3%80%90%E5%AD%A6%E6%9C%AF%E3%80%91%E8%A3%85%E5%A4%87%E7%BB%BC%E5%90%88%E4%BF%9D%E9%9A%9C%E5%85%A5%E9%97%A8/">【学术】装备综合保障入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/17/%E3%80%90%E4%BB%BF%E7%9C%9F%E3%80%91%E4%BD%BF%E7%94%A8Anylogic%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%8A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">【仿真】使用Anylogic访问服务器及文件系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/15/%E3%80%90WEB%E3%80%91%E4%BD%BF%E7%94%A8echarts.js%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BD%A2%E8%AE%A1%E7%AE%97%E5%BA%94%E7%94%A8/">【WEB】使用echarts.js搭建图形计算应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/31/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91%E5%A6%82%E4%BD%95%E6%90%9C%E7%B4%A2%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90/">【学习】如何搜索学习资源</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/30/%E3%80%90WEB%E3%80%91%E5%88%A9%E7%94%A8thinkphp%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%AB%99%E7%82%B9/">【WEB】利用thinkphp创建一个简单的站点</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/30/%E3%80%90%E5%9F%BA%E7%A1%80%E3%80%91%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">【基础】如何安装操作系统</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.baidu.com/" title="百度" target="_blank">百度</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">？0的网络笔记.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>